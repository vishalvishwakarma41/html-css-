var gaconnector2=function(){const e=["color","date","datetime-local","month","number","range","search","time","url","week"],t={name:[/^name$/i,/^user.*name$/i],email:[/email/i],phone:[/phone/i]};let n=!1;var r=!1;let o,a,i,c,d=!0,s=[],u=null;const l=!!(window.TextEncoder&&window.Uint8Array&&window.crypto&&window.crypto.subtle&&window.crypto.subtle.digest),g=!!window.crypto&&!!window.crypto.randomUUID,f="https://track.gaconnector.com/track_pageview",m="https://track.gaconnector.com/save_identifier";function h(){n&&console.debug.apply(console,arguments)}const p=e=>{if("function"==typeof navigator.sendBeacon)navigator.sendBeacon(e);else{var t=new XMLHttpRequest;t.open("GET",e,!0),t.send()}},w=e=>new Promise((function(t,n){!function n(){var r=new Promise((function(t,n){!function(){window.dataLayer.push(arguments)}("get",a,e,(function(e){t(e)}))})),o=new Promise((function(e,t){setTimeout((function(){t(new Error("Timeout after 200ms"))}),200)}));Promise.race([r,o]).then((function(e){e?t(e):setTimeout(n,200)})).catch((function(e){setTimeout(n,200)}))}()})),y=()=>{if(window.dataLayer){var e=window.dataLayer.find((function(e){return"config"===e[0]&&e[1].startsWith("G-")}));if(e)return h("Found measurement id in dataLayer",e[1]),e[1]}if(window.google_tag_data&&google_tag_data.tidr&&google_tag_data.tidr.container){var t=Object.keys(google_tag_data.tidr.container);if(t.length>0){var n=t.find((function(e){return e.startsWith("G-")}));if(n)return h("Found measurement id in google_tag_data",n),n}}let r=(()=>{const e=document.cookie.split("; ").find((e=>e.startsWith("_ga_")));if(e){const t=e.split("=")[0];if(/^_ga_[A-Z0-9]+$/.test(t))return"G-"+t.replace("_ga_","")}return null})();return r?(h("Found measurement id in cookie",r),r):(h("No measurement id found"),r)},v=()=>{const e=document.cookie.split("; ").find((e=>"_ga"===e.split("=")[0]));if(e){let t=e.split("=")[1].split(".");return t.length<4?null:t[2]+"."+t[3]}return null},b=()=>{var e=y(),t=document.cookie.split("; ").find((function(t){return t.startsWith("_ga_"+e.replace("G-",""))}));if(t){var n=t.split("=");if(2===n.length){var r=n[1].split(".");if(r.length>2){var o=r[2];if(parseInt(o)===new Date(1e3*o).getTime()/1e3)return o}}}return null},k=e=>{if("localhost"===window.location.hostname)return"localhost";for(var t,n=e.split("/")[2],r=[/[-\w]+(?:\.(?:com|org|net|int|edu|gov|io|ai|gg|info|xyz|site|biz|aero|mil|name|coop|jobs|travel|online|live|shop|store|xn--[-\w]+|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)){1,2}$/i,/[-\w]+\.(?:[-\w]+\.xn--[-\w]+|[-\w]{2,}|[-\w]+\.[-\w]{2})$/i],o=0;o<r.length;o++){if(topDomainSearchResult=r[o].exec(n),"object"==typeof topDomainSearchResult&&topDomainSearchResult instanceof Array&&0!==topDomainSearchResult.length){t=topDomainSearchResult[0];break}}if(!t)try{t=new URL(e).hostname}catch(t){return e}return t.split(".").filter((e=>e.length)).length>2?t.replace("www.",""):t},_=e=>{var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null},S=(e,t,n)=>{d?localStorage.setItem(e,t):((e,t,n)=>{h("Setting cookie",e,t);var r=new Date;r.setTime(r.getTime()+31536e6);var o="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+o+";domain=."+k(document.location.href)+";path=/"})(e,t)},I=e=>{e+="=";for(var t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""},j=e=>d&&localStorage.getItem(e)||I(e),A=()=>{if(g)return crypto.randomUUID();function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},E=e=>{if(l){const t=(new TextEncoder).encode(e);return new Promise(((e,n)=>{window.crypto.subtle.digest("SHA-256",t).then((t=>{const n=Array.from(new Uint8Array(t)).map((e=>("00"+e.toString(16)).slice(-2))).join("");e(n.toUpperCase())})).catch(n)}))}return Promise.resolve(function(e){function t(e,t){return e>>>t|e<<32-t}function n(e,t){return e>>>t}function r(e,t,n){return e&t^~e&n}function o(e,t,n){return e&t^e&n^t&n}function a(e){return t(e,2)^t(e,13)^t(e,22)}function i(e){return t(e,6)^t(e,11)^t(e,25)}function c(e){return t(e,7)^t(e,18)^n(e,3)}var d,s=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return(d=e,function(e){for(var t,n="0123456789abcdef",r="",o=0;o<e.length;o++)t=e.charCodeAt(o),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}(function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>24-n%32&255);return t}(function(e,d){var l,g,f,m,h,p,w,y,v,b,k,_,S,I=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),j=new Array(64);for(e[d>>5]|=128<<24-d%32,e[15+(d+64>>9<<4)]=d,v=0;v<e.length;v+=16){for(l=I[0],g=I[1],f=I[2],m=I[3],h=I[4],p=I[5],w=I[6],y=I[7],b=0;b<64;b++)j[b]=b<16?e[b+v]:u(u(u(t(S=j[b-2],17)^t(S,19)^n(S,10),j[b-7]),c(j[b-15])),j[b-16]),k=u(u(u(u(y,i(h)),r(h,p,w)),s[b]),j[b]),_=u(a(l),o(l,g,f)),y=w,w=p,p=h,h=u(m,k),m=f,f=g,g=l,l=u(k,_);I[0]=u(l,I[0]),I[1]=u(g,I[1]),I[2]=u(f,I[2]),I[3]=u(m,I[3]),I[4]=u(h,I[4]),I[5]=u(p,I[5]),I[6]=u(w,I[6]),I[7]=u(y,I[7])}return I}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e),8*e.length))}(function(e){for(var t,n,r="",o=-1;++o<e.length;)t=e.charCodeAt(o),n=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),o++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}(d)))).toUpperCase()}(e))},C=(e,t)=>{h("identify",e,t),o&&u&&e&&t&&E(t.toLowerCase()).then((t=>{const n=new URL(m),r={gaconnector_id:o,account_id:u,name:e,value_hash:t,gamid:a,gacid:i,gasid:c};for(let e in r)n.searchParams.set(e,r[e]);p(n.toString())})).catch(console.error)},L=()=>{Array.from(document.getElementsByTagName("input")).filter((t=>!t.getAttribute("data-gaconnector-tracked")&&!e.includes(t.type))).forEach((e=>{e.setAttribute("data-gaconnector-tracked",!0),e.addEventListener("change",T)}))},T=e=>{if(n=e.target.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n))C("email",e.target.value);else for(const n in t)t[n].some((t=>t.test(e.target.name)||t.test(e.target.id)))&&C(n,e.target.value);var n},R=()=>{h("initializeTrackPageview",{insideIframe:z(),automatedTesting:r}),z()&&!r||((()=>{h("Track pageview triggered");const e=new URL(f),t={gaconnector_id:o,account_id:u,referer:document.referrer,page_url:window.location.href};["gclid","utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach((function(e){const n=new URLSearchParams(window.location.search).get(e);t[e]=n||""}));for(let n in t)e.searchParams.set(n,t[n]);p(e.toString())})(),new Promise((function(e,t){let n=0;!function t(){n++,h("Attempting to get measurement id");var r=y();if(r)e(r);else{if(n>=50)return h("Timeout getting measurement id"),e();setTimeout(t,200)}}()})).then((function(e){a=e,a&&(new Promise((function(e,t){if(window.gtag||window.dataLayer)return void w("client_id").then((function(t){h("Got client id from dataLayer",t),e(t)})).catch((function(t){let n=v();if(n)return h("Got client id from cookie (error fallback)",n),e(n);h("No client id found (error fallback)"),e()}));let n=v();return n&&h("Got client id from cookie (fallback)",n),e(n)})).then((function(e){i=e})).catch((function(e){console.error(e)})),new Promise((function(e,t){if(!window.gtag&&!window.dataLayer){var n=b();return n?(h("Got session id from cookie (fallback)",n),e(n)):e(null)}w("session_id").then((function(t){h("Got session id from dataLayer",t),e(t)})).catch((function(t){var n=b();if(n)return h("Got session id from cookie (error fallback)",n),e(n);h("No session id found (error fallback)"),e()}))})).then((function(e){c=e})).catch((function(e){console.error(e)})))})).catch((function(e){console.error(e)})))},z=()=>self!==top,D=()=>{for(var e=document.querySelectorAll("iframe"),t=0;t<e.length;t++){var n=e[t].contentWindow,r={gaconnectorId:o,accountId:u,gaMeasurementId:a,gaClientId:i,gaSessionId:c};n.postMessage(r,"*")}},U=e=>{e.data&&"object"==typeof e.data&&e.data.gaconnectorId&&(h("Received iframe message",e),o=e.data.gaconnectorId,u=e.data.accountId,S("gaconnector2_id",o,365),e.data.gaMeasurementId&&(a=e.data.gaMeasurementId),e.data.gaClientId&&(i=e.data.gaClientId),e.data.gaSessionId&&(c=e.data.gaSessionId))},x=e=>{var t,n=e.dataset.originalHref;return void 0===n&&(e.dataset.originalHref=e.href,n=e.href),t=n.indexOf("?")>-1?"&":"?",e.href=n+t+"gaconnectorId="+o,e.href},P=()=>{for(var e=k(document.location.href),t=_(document.location.href),n=document.getElementsByTagName("a"),r=0;r<n.length;r++){var o=n[r],a=k(o.href),i=_(o.href);(s.indexOf(a)>-1&&a!==e||d&&s.indexOf(i)>-1&&i!==t)&&x(o)}},O=e=>{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},G=e=>{localStorage.removeItem(e)},W=e=>{const t=!!window.localStorage&&!!window.localStorage.setItem,n=!!e&&"localStorage"===e.storageEngine,r=!e||"string"!=typeof e.storageEngine,o=!!e&&!!e.internalDomains&&!!e.internalDomains.length;d=t&&(n||r&&!o),gaconnector2.useLocalStorage=d;const a=(()=>{for(var e={},t=document.cookie.split("; "),n=0;n<t.length;n++){var r=t[n].split("=")[0],o=t[n].split("=").slice(1).join("=");r.length>13&&"gaconnector2_"==r.substring(0,13)&&(e[r.replace("gaconnector2_","")]=o)}return e})(),i=(()=>{for(var e=Object.keys(localStorage),t={},n=0;n<e.length;n++)"gaconnector2_"===e[n].substr(0,13)&&(t[e[n].replace("gaconnector2_","")]=localStorage.getItem(e[n]));return t})();if(d)for(let e in a)a[e]&&!i[e]&&S("gaconnector2_"+e,a[e]),O("gaconnector2_"+e);else for(let e in i)i[e]&&!a[e]&&S("gaconnector2_"+e,i[e]),G("gaconnector2_"+e)},M=function(){function e(){if(!o.isReady){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(e,1)}o.ready()}}var t,n,r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},o={isReady:!1,readyWait:1,holdReady:function(e){e?o.readyWait++:o.ready(!0)},ready:function(e){if(!0===e&&!--o.readyWait||!0!==e&&!o.isReady){if(!document.body)return setTimeout(o.ready,1);if(o.isReady=!0,!0!==e&&--o.readyWait>0)return;t.resolveWith(document,[o])}},bindReady:function(){if(!t){if(t=o._Deferred(),"complete"===document.readyState)return setTimeout(o.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",o.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",o.ready);var r=!1;try{r=null==window.frameElement}catch(e){}document.documentElement.doScroll&&r&&e()}}},_Deferred:function(){var e,t,n,r=[],a={done:function(){if(!n){var t,i,c,d,s,u=arguments;for(e&&(s=e,e=0),t=0,i=u.length;t<i;t++)c=u[t],"array"===(d=o.type(c))?a.done.apply(a,c):"function"===d&&r.push(c);s&&a.resolveWith(s[0],s[1])}return this},resolveWith:function(o,a){if(!n&&!e&&!t){a=a||[],t=1;try{for(;r[0];)r.shift().apply(o,a)}finally{e=[o,a],t=0}}return this},resolve:function(){return a.resolveWith(this,arguments),this},isResolved:function(){return!(!t&&!e)},cancel:function(){return n=1,r=[],this}};return a},type:function(e){return null==e?String(e):r[Object.prototype.toString.call(e)]||"object"}};return document.addEventListener?n=function(){document.removeEventListener("DOMContentLoaded",n,!1),o.ready()}:document.attachEvent&&(n=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",n),o.ready())}),function(e){o.bindReady(),o.type(e),t.done(e)}}(),q={track:(e,t={})=>{u=e,o=(()=>{const e=new URLSearchParams(window.location.search).get("gaconnectorId"),t=j("gaconnectorId")||j("gaconnector2_id"),n=e||t||A();return n!==j("gaconnector2_id")&&S("gaconnector2_id",n,365),n})(),(e=>{if(!0===e)n=!0;else try{var t=document.querySelector('script[src*="gaconnector.js"]');t||(t=document.querySelector('script[src*="https://track.gaconnector.com/js"]')),t&&"true"===new URL(t.src).searchParams.get("debug")&&(n=!0)}catch(e){console.error(e)}n&&h("GA Connector debugging enabled")})("object"==typeof t&&t.debug),W(t),r="object"==typeof t&&!0===t.automatedTesting,!1!==t.iframeEnabled&&(z()?(h("Adding receiveGaConnectorId listener"),window.addEventListener("message",U,!1)):(h("Messaging child iframes"),D(),setInterval(D,1e3))),R(),M((function(){L(),setInterval(L,1e3),t.internalDomains&&(s=t.internalDomains,P(),setInterval(P,1e3))}))},identify:C,debugData:()=>JSON.parse(JSON.stringify({accountId:u,gaconnectorId:o,gaSessionId:c||null,gaClientId:i||null,gaMeasurementId:a||null,cryptoApiSupported:l,cryptoRandomUuidSupported:g}))};return Object.freeze?Object.freeze(q):q}();